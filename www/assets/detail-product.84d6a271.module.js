import{r,u as y,z as b,b as s,P as I,j as a,B as l}from"./vendor.c1cb196c.module.js";import{h as j,s as B,i as S,B as k}from"./index.f0afc4ff.module.js";import{c as C,a as E}from"./math.00be3203.module.js";const O=({zmproute:P})=>{const[e,v]=r.exports.useState(),[t,N]=r.exports.useState(),m=y("cart"),d=y("store");r.exports.useEffect(()=>{const{productId:i,storeId:c}=P.query;if(c&&i&&d){const x=d.find(h=>h.key==c),g=x.listProducts.find(h=>h.id==i);x&&N(x),g&&v(g)}},[d]);const p=r.exports.useMemo(()=>C(e==null?void 0:e.salePrice,e==null?void 0:e.retailPrice),[e]),n=r.exports.useMemo(()=>{if(t){const i=m.find(c=>c.storeId==(t==null?void 0:t.key));if(i)return i}},[t,m]),o=r.exports.useMemo(()=>n?E(n.listOrder):0,[n,m]),u=r.exports.useMemo(()=>({content:"Th\xEAm v\xE0o gi\u1ECF",type:"primary",onClick:()=>{b.views.main.router.navigate({path:"/product-picker/",query:{productId:e==null?void 0:e.id,storeId:t==null?void 0:t.key}})}}),[e,t]),f=r.exports.useMemo(()=>({content:"Thanh to\xE1n",type:"secondary",onClick:()=>{b.views.main.router.navigate({path:"/finish-order/",query:{id:n.orderId}},{animate:!1})}}),[n]),w=r.exports.useMemo(()=>o>0?[f,u]:[u],[o,u,f]);return s(I,{name:"Detail Product",onPageBeforeIn:j,onPageBeforeOut:B,className:"",children:[s("div",{className:" relative bg-white mb-[80px]",children:[e&&a("img",{src:S(e.pathImg),alt:"",className:"w-full h-auto"}),p&&s("div",{className:"absolute top-2.5 right-2.5 text-white font-medium text-sm px-2 py-1 bg-[#FF9743] w-auto h-auto rounded-lg",children:["-",p,"%"]}),s(l,{m:0,p:4,className:"border-b",children:[a("div",{className:" text-lg",children:e==null?void 0:e.nameProduct}),s("span",{className:" pt-1 font-semibold text-base text-primary",children:[a("span",{className:" font-normal text-xs text-primary",children:"\u0111"}),e==null?void 0:e.salePrice]}),s("span",{className:" pl-2 pt-1 font-medium text-sm text-zinc-400",children:["\u0111",e==null?void 0:e.retailPrice]})]}),a(l,{m:0,px:4,py:5,className:" text-justify break-words whitespace-pre-line",children:e==null?void 0:e.description})]}),o&&s(l,{px:4,py:3,flex:!0,justifyContent:"space-between",alignItems:"center",className:" bg-gray-300 rounded-primary fixed bottom-20 left-0 right-0 z-50",children:[a("div",{children:"\u0110\u01A1n h\xE0ng"}),s(l,{m:0,flex:!0,justifyContent:"space-around",alignItems:"center",children:[s("div",{children:[n.listOrder.length," m\xF3n"]}),a("div",{className:" w-1 h-1 bg-black rounded-lg mx-3"}),a("div",{children:o.toString()})]})]}),a(k,{listBtn:w})]})};export{O as default};
